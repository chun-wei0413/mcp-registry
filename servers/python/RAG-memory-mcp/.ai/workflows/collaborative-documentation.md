# Workflow: 協作式文檔生成

## 概述

此工作流程指導 AI 和人類協作創建全面的專案文檔，確保知識持久化並可供未來的 AI 會話使用。

## 目標

1. 捕捉專案的完整上下文
2. 記錄架構決策和理由
3. 建立可重用的知識庫
4. 確保文檔保持最新

## 工作流程

### 階段 1：發現（Discovery）

**AI 行動**：
1. 掃描整個代碼庫結構
2. 識別主要技術棧和框架
3. 分析現有文檔
4. 找出知識空白

**人類輸入**：
- 確認專案目標和願景
- 解釋關鍵業務需求
- 指出重要但不明顯的設計決策

**產出**：
- 專案概覽文檔
- 技術棧清單
- 知識空白報告

### 階段 2：架構文檔

**AI 行動**：
1. 分析代碼結構和模式
2. 繪製組件關係圖
3. 識別架構模式（如 Clean Architecture）
4. 記錄 API 和介面

**人類輸入**：
- 解釋架構選擇的原因
- 描述未來的擴展計劃
- 指出技術債務和妥協

**產出**：
- 架構決策記錄（ADRs）
- 組件關係圖
- API 文檔

### 階段 3：領域知識

**AI 行動**：
1. 提取領域模型
2. 分析業務規則
3. 記錄領域事件流
4. 創建術語表

**人類輸入**：
- 驗證業務規則的準確性
- 解釋邊緣案例
- 提供真實世界的使用場景

**產出**：
- 領域模型文檔
- 業務規則目錄
- 使用案例集合

### 階段 4：開發指南

**AI 行動**：
1. 從代碼中提取編碼模式
2. 生成開發工作流程
3. 創建設置指南
4. 記錄測試策略

**人類輸入**：
- 分享團隊約定
- 解釋 CI/CD 流程
- 提供故障排除技巧

**產出**：
- 開發者入門指南
- 編碼標準文檔
- 測試指南

### 階段 5：維護計劃

**AI 行動**：
1. 建立文檔更新流程
2. 創建檢查清單
3. 設置版本追踪
4. 定義審查週期

**人類輸入**：
- 設定更新頻率
- 指定負責人
- 定義質量標準

**產出**：
- 文檔維護流程
- 更新檢查清單
- 質量保證指南

## 執行指南

### 參與模式選擇

根據 `EZ-AI-CONFIG.md` 中的設定：

**High Engagement**：
- 每個階段都需要詳細審查
- 人類主導內容方向
- AI 作為文檔助手

**Medium Engagement**：
- AI 生成初稿
- 人類審查和補充
- 迭代改進

**Auto-pilot**：
- AI 自主完成文檔
- 記錄所有假設
- 最終人類審查

### 最佳實踐

1. **漸進式文檔**：不要試圖一次完成所有文檔
2. **活文檔**：保持文檔與代碼同步更新
3. **實用優先**：專注於真正有用的文檔
4. **版本控制**：所有文檔都應該在版本控制中

### 工具和模板

使用現有工具：
- `.ai/templates/` - 文檔模板
- `.ai/tech-stacks/java-ca-ezddd-spring/examples/` - 範例文檔
- `.dev/specs/` - 領域規格模板

### 成功標準

- [ ] 新開發者能在 1 小時內理解專案
- [ ] AI 助手能準確回答專案相關問題
- [ ] 文檔覆蓋所有關鍵決策
- [ ] 建立了定期更新機制

## 時間估算

- 小型專案：2-4 小時
- 中型專案：1-2 天
- 大型專案：3-5 天

## 注意事項

1. **避免過度文檔化**：只記錄真正重要的內容
2. **保持一致性**：使用統一的格式和術語
3. **考慮受眾**：為不同讀者（開發者、AI、管理層）調整內容
4. **定期審查**：過時的文檔比沒有文檔更糟

## 相關資源

- `.ai/CONTEXT-GUIDE.md` - 上下文管理
- `.ai/tech-stacks/` - 編碼標準
- `.dev/specs/` - 領域規格
- `AI-ASSUMPTIONS.md` - 決策記錄